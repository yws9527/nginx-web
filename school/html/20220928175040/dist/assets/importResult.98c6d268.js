import{_ as H}from"./index.928e1f3b.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css                */import{d as P,e as f,r as k,z as M,aL as G,C as J,D as O,G as t,aO as D,aI as c,aH as n,u as W,aN as v,aR as b,aW as j,bu as K,b9 as Q,ba as U}from"./arco.b2fea22a.js";import{u as X}from"./loading.41f62eb6.js";import{f as Y}from"./vue.e5338f86.js";import{e as Z}from"./tools.c661ac2d.js";import{h as $,i as ee}from"./studentmgmt.217d652b.js";import"./chart.2195b2ce.js";const F=p=>(Q("data-v-af517503"),p=p(),U(),p),te={class:"container"},oe={class:"result-header"},se=F(()=>t("div",{class:"title"},"\u5BFC\u5165\u7ED3\u679C",-1)),ae={class:"sub-result"},ue={class:"sub-item"},re={class:"total"},ie=F(()=>t("div",{class:"desc"},"\u672C\u6B21\u5BFC\u5165\u5B66\u751F\u6570 (\u4E2A)",-1)),ce={class:"sub-item"},le={class:"total fail"},ne=F(()=>t("div",{class:"desc"},"\u672C\u6B21\u672A\u6210\u529F\u5BFC\u5165\u5B66\u751F\u6570 (\u4E2A)",-1)),pe={class:"result-table"},_e={class:"table-title"},de=F(()=>t("div",{class:"table-title-text"},"\u5F02\u5E38\u60C5\u51B5\u6C47\u603B",-1)),me={class:"table-title-action"},he=v(" \u4E0B\u8F7D\u672A\u6210\u529F\u5BFC\u5165\u6C47\u603B\u8868 "),fe={class:"table-content"},ve={class:"result-btns"},Fe=v(" \u8FD4\u56DE "),ge=v(" \u5237\u65B0 "),Be=v("\u91CD\u65B0\u5BFC\u5165"),Ce=P({__name:"importResult",setup(p){const g=Y(),y=f(0),E=f(0),_=k({templateName:"",importSerialNum:""}),B=f(),C=f(),{loading:z,setLoading:x}=X(!1),a=k({total:0,current:1,pageSize:10,showTotal:!0,showJumper:!0,showPageSize:!0}),d=async()=>{var m,h,S,w,N;const{templateName:o,importSerialNum:u}=_,{msg:r,data:e,succ:l}=await $({templateName:o,importSerialNum:u,pageNum:a.current,pageSize:a.pageSize});l?(h=(m=e==null?void 0:e.pageView)==null?void 0:m.list)!=null&&h.length&&(y.value=(e==null?void 0:e.importTotal)||0,E.value=(e==null?void 0:e.errorTotal)||0,(S=e==null?void 0:e.headList)==null||S.forEach(s=>{const{dataIndex:i}=s;i==="error"?(s.width=400,s.fixed="right",s.ellipsis=!0,s.tooltip=!0):i==="school_name"||i==="identity_card"||i==="ic_card"?s.width=200:i==="source"||i==="family_address"?(s.width=200,s.ellipsis=!0,s.tooltip=!0):s.width=120}),B.value=(e==null?void 0:e.headList)||[],C.value=((w=e==null?void 0:e.pageView)==null?void 0:w.list)||[],a.total=((N=e==null?void 0:e.pageView)==null?void 0:N.total)||0):b.error(r)},T=async()=>{const{templateName:o,importSerialNum:u}=_,r=await ee({templateName:o,importSerialNum:u,fileName:"\u5B66\u751F\u57FA\u672C\u4FE1\u606F-\u9519\u8BEF"});if(r){const{headers:e,data:l}=r,m=e["content-type"],h=new Blob([l],{type:m});Z(h,"\u5B66\u751F\u57FA\u672C\u4FE1\u606F-\u9519\u8BEF"),b.success("\u5BFC\u51FA\u6210\u529F")}else b.error("\u5BFC\u51FA\u6587\u4EF6\u5931\u8D25")},A=()=>{T()},I=()=>{x(!0),a.total=0,a.current=1,a.pageSize=10,B.value=[],C.value=[],d(),setTimeout(()=>{x(!1)},1200)},L=()=>{g.replace({name:"Studentmgmt"})},R=()=>{g.back()},V=o=>{a.current=o,d()},q=o=>{a.pageSize=o,d()};return M(()=>{const{query:{importSerialNum:o,templateName:u}}=g.currentRoute.value;_.templateName=u,_.importSerialNum=o,d()}),(o,u)=>{const r=G("icon-to-bottom"),e=j,l=K;return J(),O("div",te,[t("div",oe,[se,t("div",ae,[t("div",ue,[t("div",re,D(y.value),1),ie]),t("div",ce,[t("div",le,D(E.value),1),ne])])]),t("div",pe,[t("div",_e,[de,t("div",me,[c(e,{type:"primary",onClick:A},{icon:n(()=>[c(r,{size:18})]),default:n(()=>[he]),_:1})])]),t("div",fe,[c(l,{"row-key":"id",scroll:{x:200},bordered:!1,hoverable:!1,"sticky-header":!0,data:C.value,columns:B.value,pagination:a,onPageChange:V,onPageSizeChange:q},null,8,["data","columns","pagination"])])]),t("div",ve,[c(e,{class:"mr8",type:"primary",onClick:L},{default:n(()=>[Fe]),_:1}),c(e,{class:"mr8",type:"primary",loading:W(z),onClick:I},{default:n(()=>[ge]),_:1},8,["loading"]),c(e,{onClick:R},{default:n(()=>[Be]),_:1})])])}}});const Re=H(Ce,[["__scopeId","data-v-af517503"]]);export{Re as default};
