import{u as N,_ as I,b as T,d as te,e as oe,f as G,g as ne,l as Y,h as O,D as ae}from"./index.928e1f3b.js";import{F as se}from"./index.ce4f8246.js";import{aR as ue,d as M,c as y,r as re,C as w,D as A,aI as s,aH as f,u as _,k as ce,aN as Q,b3 as le,b2 as ie,b8 as de,bo as pe,e as F,i as _e,aL as S,G as B,aE as D,aF as $,F as z,bz as fe,b6 as me,aW as he,bN as ve,bA as be,b9 as q,ba as K,bO as ge,bP as ye,h as j,bQ as H,bR as we,bS as Be,aO as Ce,bT as xe,E as X,bU as ke,bV as De,w as ee,aK as Ee,aJ as Se,bW as Fe,o as Me,z as Le,bX as $e,bG as Z,bY as Ae,bZ as Ie,p as Te,bn as Pe,b_ as Re,b$ as Ve,aY as Ue,c0 as ze,c1 as Ne}from"./arco.b2fea22a.js";import{f as V,h as Oe,i as qe,j as Ke,k as W,l as We}from"./vue.e5338f86.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               */import{a as je,o as He}from"./index.614842bb.js";import{d as E}from"./enums.c11d9f01.js";import"./chart.2195b2ce.js";function Ze(){const o=V(),t=N();return{logout:async l=>{await t.logout();const c=o.currentRoute.value;ue.success("\u767B\u51FA\u6210\u529F"),o.push({name:l&&typeof l=="string"?l:"login",query:{...o.currentRoute.value.query,redirect:c.name}})}}}const Je={class:"container"},Ge=Q("\u4FEE\u6539\u5BC6\u7801"),Ye=M({__name:"index",props:{showModel:{type:Boolean,default:!0}},emits:["updatemodel"],setup(o,{emit:t}){const u=o,l=y(()=>u.showModel),c=re({originPwd:"",newPwd:"",confirmPwd:""}),v=()=>{t("updatemodel")},d=()=>{t("updatemodel")};return(m,b)=>{const i=le,C=ie,x=de,a=pe;return w(),A("div",Je,[s(a,{visible:_(l),"onUpdate:visible":b[3]||(b[3]=n=>ce(l)?l.value=n:null),"title-align":"start","unmount-on-close":"","ok-text":"\u786E\u5B9A\u4FEE\u6539","on-before-open":v,onCancel:d},{title:f(()=>[Ge]),default:f(()=>[s(x,{model:c},{default:f(()=>[s(C,{field:"originPwd",label:"\u539F\u59CB\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{match:/[a-zA-Z0-9]{6,8}/,message:"\u5BC6\u7801\u957F\u5EA66-8\u4F4D\u6570\u5B57\u6216\u5B57\u6BCD"}],"validate-trigger":["change","input"]},{default:f(()=>[s(i,{modelValue:c.originPwd,"onUpdate:modelValue":b[0]||(b[0]=n=>c.originPwd=n),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u521D\u59CB\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),s(C,{field:"newPwd",label:"\u65B0\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{match:/[a-zA-Z0-9]{6,8}/,message:"\u5BC6\u7801\u957F\u5EA66-8\u4F4D\u6570\u5B57\u6216\u5B57\u6BCD"}],"validate-trigger":["change","input"]},{default:f(()=>[s(i,{modelValue:c.newPwd,"onUpdate:modelValue":b[1]||(b[1]=n=>c.newPwd=n),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),s(C,{field:"confirmPwd",label:"\u786E\u8BA4\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{match:/[a-zA-Z0-9]{6,8}/,message:"\u5BC6\u7801\u957F\u5EA66-8\u4F4D\u6570\u5B57\u6216\u5B57\u6BCD"}],"validate-trigger":["change","input"]},{default:f(()=>[s(i,{modelValue:c.confirmPwd,"onUpdate:modelValue":b[2]||(b[2]=n=>c.confirmPwd=n),"allow-clear":"",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}});const Qe=I(Ye,[["__scopeId","data-v-f6f112ac"]]),Xe=o=>(q("data-v-1aabee85"),o=o(),K(),o),et={class:"navbar"},tt={class:"left-side"},ot=Xe(()=>B("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"},null,-1)),nt=Q(" \u5B66\u6821\u7BA1\u7406\u540E\u53F0 "),at={class:"right-side"},st={class:"message-box-trigger"},ut=["src"],rt=M({__name:"index",setup(o){const t=F(!1),u=T(),l=N(),{logout:c}=Ze();te(),Oe();const v=y(()=>l.avatar);y(()=>u.theme);const d=qe({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(C){u.toggleTheme(!1)}});Ke(d),F(),F();const m=()=>{t.value=!1},b=()=>{c()},i=_e("toggleDrawerMenu");return(C,x)=>{const a=fe,n=S("icon-menu-fold"),r=me,e=S("icon-export"),p=he,h=ve,k=S("IconUser"),g=be;return w(),A("div",et,[B("div",tt,[s(r,null,{default:f(()=>[ot,s(a,{style:{margin:0,fontSize:"18px"},heading:5},{default:f(()=>[nt]),_:1}),_(u).device==="mobile"?(w(),D(n,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:_(i)},null,8,["onClick"])):$("",!0)]),_:1})]),B("ul",at,[B("li",null,[s(h,{content:"\u9000\u51FA\u767B\u5F55"},{default:f(()=>[B("div",st,[s(p,{class:"nav-btn",type:"outline",shape:"circle",onClick:b},{default:f(()=>[s(e)]),_:1})])]),_:1})]),B("li",null,[s(g,{size:32,style:z({marginRight:"8px",cursor:"pointer",background:_(v)?"":"rgb(var(--arcoblue-6))"})},{default:f(()=>[_(v)?(w(),A("img",{key:0,alt:"avatar",src:_(v)},null,8,ut)):(w(),D(k,{key:1}))]),_:1},8,["style"])])]),s(Qe,{"show-model":t.value,onUpdatemodel:m},null,8,["show-model"])])}}});const ct=I(rt,[["__scopeId","data-v-1aabee85"]]);const lt=[...oe],it=lt.map(o=>{const{name:t,path:u,meta:l,redirect:c,children:v}=o;return{name:t,path:u,meta:l,redirect:c,children:v}}),dt=it;function pt(){const o=G(),t=T(),u=y(()=>t.menuFromServer?t.appAsyncMenus:dt);return{menuTree:y(()=>{const c=JSON.parse(JSON.stringify(u.value));c.sort((d,m)=>(d.meta.order||0)-(m.meta.order||0));function v(d,m){return d?d.map(i=>{var x,a;if(!o.accessRouter(i))return null;if(((x=i.meta)==null?void 0:x.hideChildrenInMenu)||!i.children)return i.children=[],i;i.children=i.children.filter(n=>{var r;return((r=n.meta)==null?void 0:r.hideInMenu)!==!0});const C=v(i.children,m+1);return C.length||m>1?(i.children=C,i):((a=i.meta)==null?void 0:a.hideInMenu)===!1?i:null}).filter(Boolean):null}return v(c,0)})}}function _t(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!ye(o)}const ft=M({emit:["collapse"],setup(){const{t:o}=ne(),t=T(),u=V(),l=W(),{menuTree:c}=pt(),v=y({get(){return t.device==="desktop"?t.menuCollapse:!1},set(a){t.updateSettings({menuCollapse:a})}}),d=F([]),m=F([]),b=a=>{if(je.test(a.path)){He(a.path),m.value=[a.name];return}console.log(a);const{hideInMenu:n,activeMenu:r,hideChildrenInMenu:e}=a.meta;if(a.path==="/dashboard"&&e&&r==="dashboard"){u.push({name:"Workplace"});return}if(a.path==="/classes"&&e&&r==="Classes"){u.push({name:"Classmgmt"});return}if(a.path==="/students"&&e&&r==="Students"){u.push({name:"Studentmgmt"});return}if(a.path==="/teachers"&&e&&r==="Teachers"){u.push({name:"Teachermgmt"});return}if(a.path==="/scores"&&e&&r==="Scores"){u.push({name:"Scoremgmt"});return}if(l.name===a.name&&!n&&!r){m.value=[a.name];return}u.push({name:a.name})},i=a=>{const n=[];let r=!1;const e=(p,h,k)=>{var g;if(p.name===k){r=!0,n.push(...h,p.name);return}(g=p.children)!=null&&g.length&&p.children.forEach(P=>{e(P,[...h],k)})};return c.value.forEach(p=>{r||e(p,[p.name],a)}),n};Y(a=>{const{requiresAuth:n,activeMenu:r,hideInMenu:e}=a.meta;if(n&&(!e||r)){const p=i(r||a.name),h=new Set([...p,...d.value]);d.value=[...h],m.value=[r||p[p.length-1]]}},!0);const C=a=>{t.device==="desktop"&&t.updateSettings({menuCollapse:a})},x=()=>{function a(n,r=[]){return n&&n.forEach(e=>{var k;const p=(k=e==null?void 0:e.meta)!=null&&k.icon?()=>{var g;return j(H(`<${(g=e==null?void 0:e.meta)==null?void 0:g.icon}/>`))}:null,h=(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)!==0?s(we,{key:e==null?void 0:e.name},{default:()=>[a(e==null?void 0:e.children)],icon:p,title:()=>{var g;return j(H(o(((g=e==null?void 0:e.meta)==null?void 0:g.locale)||"")))}}):s(Be,{key:e==null?void 0:e.name,onClick:()=>b(e)},{default:()=>{var g;return[o(((g=e==null?void 0:e.meta)==null?void 0:g.locale)||"")]},icon:p});r.push(h)}),r}return a(c.value)};return()=>{let a;return s(ge,{collapsed:v.value,"onUpdate:collapsed":n=>v.value=n,"open-keys":d.value,"onUpdate:open-keys":n=>d.value=n,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":m.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:C},_t(a=x())?a:{default:()=>[a]})}}});const J=I(ft,[["__scopeId","data-v-128c1a55"]]);const R=o=>(q("data-v-8d6120cb"),o=o(),K(),o),mt={class:"tag-link"},ht=R(()=>B("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),vt=R(()=>B("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),bt=R(()=>B("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),gt=R(()=>B("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),yt=R(()=>B("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),wt=M({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(o){const t=o,u=V(),l=W(),c=O(),v=n=>{u.push({...n})},d=y(()=>c.getTabList),m=y(()=>t.index===0),b=y(()=>[0,1].includes(t.index)),i=y(()=>t.index===d.value.length-1),C=(n,r)=>{if(c.deleteTag(r,n),t.itemData.fullPath===l.fullPath){const e=d.value[r-1];u.push({name:e.name})}},x=()=>d.value.findIndex(n=>n.fullPath===l.fullPath),a=n=>{const{itemData:r,index:e}=t,p=[...d.value];if(n===E.current)C(r,e);else if(n===E.left){const h=x();p.splice(1,t.index-1),c.freshTabList(p),h<e&&u.push({name:r.name})}else if(n===E.right){const h=x();p.splice(t.index+1),c.freshTabList(p),h>e&&u.push({name:r.name})}else if(n===E.others){const h=d.value.filter((k,g)=>g===0||g===t.index);c.freshTabList(h),u.push({name:r.name})}else c.resetTabList(),u.push({name:ae})};return(n,r)=>{const e=S("icon-close"),p=ke,h=S("icon-to-left"),k=S("icon-to-right"),g=S("icon-swap"),P=S("icon-folder-delete"),U=De;return w(),D(U,{trigger:"contextMenu",onSelect:a},{content:f(()=>[s(p,{disabled:_(m),value:_(E).current},{default:f(()=>[s(e),ht]),_:1},8,["disabled","value"]),s(p,{disabled:_(b),value:_(E).left},{default:f(()=>[s(h),vt]),_:1},8,["disabled","value"]),s(p,{disabled:_(i),value:_(E).right},{default:f(()=>[s(k),bt]),_:1},8,["disabled","value"]),s(p,{value:_(E).others},{default:f(()=>[s(g),gt]),_:1},8,["value"]),s(p,{value:_(E).all},{default:f(()=>[s(P),yt]),_:1},8,["value"])]),default:f(()=>[B("span",{class:X(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":o.itemData.fullPath===n.$route.fullPath}]),onClick:r[1]||(r[1]=L=>v(o.itemData))},[B("span",mt,Ce(n.$t(o.itemData.title)),1),B("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:r[0]||(r[0]=xe(L=>C(o.itemData,o.index),["stop"]))},[s(e)])],2)]),_:1})}}});const Bt=I(wt,[["__scopeId","data-v-8d6120cb"]]),Ct=o=>(q("data-v-7fe76b83"),o=o(),K(),o),xt={class:"tab-bar-container"},kt={class:"tab-bar-box"},Dt={class:"tab-bar-scroll"},Et={class:"tags-wrap"},St=Ct(()=>B("div",{class:"tag-bar-operation"},null,-1)),Ft=M({__name:"index",setup(o){const t=T(),u=O(),l=F(),c=y(()=>u.getTabList),v=y(()=>t.navbar?60:0);return ee(()=>t.navbar,()=>{l.value.updatePosition()}),Y(d=>{!d.meta.noAffix&&!c.value.some(m=>m.fullPath===d.fullPath)&&u.updateTabList(d)},!0),(d,m)=>{const b=Fe;return w(),A("div",xt,[s(b,{ref_key:"affixRef",ref:l,"offset-top":_(v)},{default:f(()=>[B("div",kt,[B("div",Dt,[B("div",Et,[(w(!0),A(Ee,null,Se(_(c),(i,C)=>(w(),D(Bt,{key:i.fullPath,index:C,"item-data":i},null,8,["index","item-data"]))),128))])]),St])]),_:1},8,["offset-top"])])}}});const Mt=I(Ft,[["__scopeId","data-v-7fe76b83"]]);function Lt(o,t,u,l=!1){o.addEventListener&&typeof o.addEventListener=="function"&&o.addEventListener(t,u,l)}function $t(o,t,u,l=!1){o.removeEventListener&&typeof o.removeEventListener=="function"&&o.removeEventListener(t,u,l)}const At=992;function It(){return document.body.getBoundingClientRect().width-1<At}function Tt(o){const t=T();function u(){if(!document.hidden){const c=It();t.toggleDevice(c?"mobile":"desktop"),t.toggleMenu(c)}}const l=We(u,100);Me(()=>{o&&l()}),Le(()=>{Lt(window,"resize",l)}),$e(()=>{$t(window,"resize",l)})}const Pt=M({__name:"page-layout",setup(o){const t=O(),u=y(()=>t.getCacheList);return(l,c)=>{const v=S("router-view");return w(),D(v,null,{default:f(({Component:d,route:m})=>[s(Ie,{name:"fade",mode:"out-in",appear:""},{default:f(()=>[m.meta.ignoreCache?(w(),D(Z(d),{key:m.fullPath})):(w(),D(Ae,{key:1,include:_(u)},[(w(),D(Z(d),{key:m.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),Rt={key:0,class:"layout-navbar"},Vt={class:"menu-wrapper"},Ut=M({__name:"default-layout",setup(o){const t=T(),u=N(),l=V(),c=W(),v=G();Tt(!0);const d="60px",m=y(()=>t.navbar),b=y(()=>t.menu),i=y(()=>t.hideMenu),C=y(()=>t.footer),x=y(()=>t.menuCollapse?48:t.menuWidth),a=y(()=>t.menuCollapse),n=y(()=>{const h=b.value&&!i.value?{paddingLeft:`${x.value}px`}:{},k=m.value?{paddingTop:d}:{};return{...h,...k}}),r=h=>{t.updateSettings({menuCollapse:h})};ee(()=>u.role,h=>{h&&!v.accessRouter(c)&&l.push({name:"notFound"})});const e=F(!1),p=()=>{e.value=!1};return Te("toggleDrawerMenu",()=>{e.value=!e.value}),(h,k)=>{const g=Ve,P=Ue,U=ze,L=Ne;return w(),D(L,{class:X(["layout",{mobile:_(t).hideMenu}])},{default:f(()=>[_(m)?(w(),A("div",Rt,[s(ct)])):$("",!0),s(L,null,{default:f(()=>[s(L,null,{default:f(()=>[_(b)?Pe((w(),D(g,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:_(a),collapsible:!0,width:_(x),style:z({paddingTop:_(m)?"60px":""}),"hide-trigger":!0,onCollapse:r},{default:f(()=>[B("div",Vt,[s(J)])]),_:1},8,["collapsed","width","style"])),[[Re,!_(i)]]):$("",!0),_(i)?(w(),D(P,{key:1,visible:e.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:p},{default:f(()=>[s(J)]),_:1},8,["visible"])):$("",!0),s(L,{class:"layout-content",style:z(_(n))},{default:f(()=>[_(t).tabBar?(w(),D(Mt,{key:0})):$("",!0),s(U,null,{default:f(()=>[s(Pt)]),_:1}),_(C)?(w(),D(se,{key:1})):$("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const Xt=I(Ut,[["__scopeId","data-v-23d225d8"]]);export{Xt as default};
