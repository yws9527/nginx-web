import{c as M,r as G,_ as j}from"./index.928e1f3b.js";/* empty css              *//* empty css               */import{E as W}from"./index.3ff52e9e.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               */import{d as z,e as h,r as O,o as J,b1 as K,b4 as P,bc as Q,bd as X,be as Y,b8 as Z,aW as $,D as ee,G as n,aI as t,aH as s,u as _,C as oe,b9 as ue,ba as te,aN as r,aR as V,b2 as ae,bf as se,bg as ie}from"./arco.b2fea22a.js";import{f as le}from"./vue.e5338f86.js";import{u as de}from"./loading.41f62eb6.js";import{a as ne}from"./refine.d0cb308d.js";import{S as m}from"./enums.c11d9f01.js";import"./chart.2195b2ce.js";/* empty css               */import"./file-handle.b0154fd5.js";import"./tools.c661ac2d.js";const re={citys:"/oapi/dict/area/list"},ce=p=>M({method:"get",url:re.citys,params:p}),F=p=>(ue("data-v-1cb4ecb7"),p=p(),te(),p),me={class:"refine"},pe={class:"custom-form-wrap"},_e=F(()=>n("div",{class:"form-title"},"\u5B8C\u5584\u5B66\u6821\u4FE1\u606F",-1)),fe=F(()=>n("div",{class:"form-subtitle"}," \u9996\u6B21\u767B\u5F55\uFF0C\u9700\u8981\u5B8C\u5584\u5B66\u6821\u4FE1\u606F\u624D\u80FD\u6B63\u5E38\u4F7F\u7528\u7CFB\u7EDF\u5168\u90E8\u529F\u80FD ",-1)),Fe={class:"left-part"},Ce={class:"item-left-class"},Be=F(()=>n("div",{class:"title-text"},"\u6821\u5FBD",-1)),ye=F(()=>n("div",{class:"title-tips"},"\u70B9\u51FB\u6216\u62D6\u62FD\u4E0A\u4F20",-1)),be={class:"right-part"},Ee={class:"item-right-class"},he=r("\u5C0F\u5B66"),De=r("\u521D\u4E2D"),ge=r("\u9AD8\u4E2D"),ve=r("\u5927\u5B66"),Ae=r("\u662F"),Ve=r("\u5426"),xe={class:"bottom-btns"},ke=r("\u786E\u5B9A"),we=r("\u91CD\u7F6E"),Ne=z({__name:"index",setup(p){const D=h([]),g=h([]),v=le(),C=h(),x=["S","M","H","U"],{loading:k,setLoading:B}=de(),e=O({identifier:"",slogan:"",type:"",typeList:[],provinceCode:"",provinceName:"",cityCode:"",cityName:"",areaCode:"",areaName:"",detailedAddress:"",name:"",badgeToken:"",ascriptionCity:void 0,cityArr:[]}),w=u=>{e.badgeToken=u.badgeToken},y=async(u,o,a)=>{const{succ:d,data:l}=await ce({code:o,type:u});d&&(l==null||l.forEach(c=>{Object.entries(c).forEach(b=>{const[f,E]=b;c.name=E,c.code=f,c.type=u,u==="area"&&(c.isLeaf=!0)})}),a?(u==="area"&&(D.value=l),a(l)):g.value=l)},N=async()=>{const u={type:e.type,slogan:e.slogan,cityCode:e.cityCode,cityName:e.cityName,areaCode:e.areaCode,areaName:e.areaName,identifier:e.identifier,badgeToken:e.badgeToken,provinceCode:e.provinceCode,provinceName:e.provinceName,ascriptionCity:e.ascriptionCity,detailedAddress:e.detailedAddress},{succ:o,msg:a}=await ne(u);return o||V.error(a),o},S=u=>{u.includes(m.\u5927\u5B66)&&(u[0]===m.\u5927\u5B66?u.shift():u=[m.\u5927\u5B66]);const o=x.filter(a=>u.some(d=>a===d)).join("");o==="SH"&&V.warning({duration:3e3,content:"\u5B66\u6821\u7C7B\u578B\u7EC4\u5408\u4E0D\u80FD\u4E3A\u201C\u5C0F\u5B66\uFF0C\u9AD8\u4E2D\u201D"}),e.type=o,e.typeList=u,console.log(e.typeList,e.type)},U=()=>{C.value.resetFields()},L=()=>{B(!0),C.value.validate(async o=>{if(o)B(!1);else try{await N()&&(await G(),v.replace({name:"Workplace"}))}finally{B(!1)}})},R=(u,o)=>{const{code:a,name:d,type:l}=u;setTimeout(()=>{l==="province"&&(e.provinceName=d,e.provinceCode=a,y("city",a,o)),l==="city"&&(e.cityName=d,e.cityCode=a,y("area",a,o))},100)},I=u=>{D.value.some(o=>o.code===u?(e.areaName=o.name,!0):!1),e.areaCode=u};return J(()=>{y("province");const{query:{name:u}}=v.currentRoute.value;e.name=u}),(u,o)=>{const a=ae,d=K,l=P,c=se,b=Q,f=X,E=ie,T=Y,q=Z,A=$;return oe(),ee("div",me,[n("div",pe,[_e,fe,t(q,{ref_key:"formRef",ref:C,model:e,class:"custom-form"},{default:s(()=>[n("div",Fe,[n("div",Ce,[t(a,{"hide-label":""},{default:s(()=>[t(W,{onUpdateImgUrl:w},{"uploader-tips":s(()=>[Be,ye]),_:1})]),_:1}),t(a,{field:"slogan","hide-label":""},{default:s(()=>[t(d,{modelValue:e.slogan,"onUpdate:modelValue":o[0]||(o[0]=i=>e.slogan=i),placeholder:"\u8BF7\u5728\u6B64\u8F93\u5165\u6821\u8BAD"},null,8,["modelValue"])]),_:1})])]),n("div",be,[n("div",Ee,[t(a,{field:"name",label:"\u5B66\u6821\u540D\u79F0",disabled:""},{default:s(()=>[t(d,{modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=i=>e.name=i),placeholder:"\u8BF7\u8F93\u5165\u5B66\u6821\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(a,{field:"identifier",label:"\u5B66\u6821\u7F16\u7801"},{default:s(()=>[t(d,{modelValue:e.identifier,"onUpdate:modelValue":o[2]||(o[2]=i=>e.identifier=i),placeholder:"\u8BF7\u8F93\u5165\u5B66\u6821\u7F16\u7801","show-word-limit":"","max-length":10},null,8,["modelValue"])]),_:1}),t(a,{field:"typeList",label:"\u5B66\u6821\u7C7B\u522B",rules:[{required:!0,message:"\u5B66\u6821\u7C7B\u522B\u4E0D\u80FD\u4E3A\u7A7A"},{validator:(i,H)=>{(String(i)==="S,H"||String(i)==="H,S")&&H("\u5B66\u6821\u7C7B\u578B\u7EC4\u5408\u4E0D\u80FD\u4E3A\u201C\u5C0F\u5B66\uFF0C\u9AD8\u4E2D\u201D")}}]},{default:s(()=>[t(c,{modelValue:e.typeList,"onUpdate:modelValue":o[3]||(o[3]=i=>e.typeList=i),onChange:S},{default:s(()=>[t(l,{value:_(m).\u5C0F\u5B66},{default:s(()=>[he]),_:1},8,["value"]),t(l,{value:_(m).\u521D\u4E2D},{default:s(()=>[De]),_:1},8,["value"]),t(l,{value:_(m).\u9AD8\u4E2D},{default:s(()=>[ge]),_:1},8,["value"]),t(l,{value:_(m).\u5927\u5B66},{default:s(()=>[ve]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1},8,["rules"]),t(a,{field:"cityArr",label:"\u6240\u5C5E\u533A\u57DF",rules:[{required:!0,message:"\u5B66\u6821\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:s(()=>[t(b,{modelValue:e.cityArr,"onUpdate:modelValue":o[4]||(o[4]=i=>e.cityArr=i),"load-more":R,options:g.value,placeholder:"\u8BF7\u9009\u62E9\u5B66\u6821\u5730\u5740","allow-clear":"","field-names":{label:"name",value:"code"},onChange:I},null,8,["modelValue","options"])]),_:1}),t(a,{field:"ascriptionCity",label:"\u5E02\u76F4\u5C5E\u5B66\u6821",rules:[{required:!0,message:"\u662F\u5426\u76F4\u5C5E\u9009\u62E9\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:s(()=>[t(E,{modelValue:e.ascriptionCity,"onUpdate:modelValue":o[5]||(o[5]=i=>e.ascriptionCity=i)},{default:s(()=>[t(f,{value:"1"},{default:s(()=>[Ae]),_:1}),t(f,{value:"0"},{default:s(()=>[Ve]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(a,{field:"detailedAddress",label:"\u8BE6\u7EC6\u5730\u5740"},{default:s(()=>[t(T,{modelValue:e.detailedAddress,"onUpdate:modelValue":o[6]||(o[6]=i=>e.detailedAddress=i),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u7684\u5B66\u6821\u4F4F\u5740\uFF0C\u6700\u591A\u4E0D\u8D85\u8FC7200\u5B57\u3002","allow-clear":"","auto-size":{maxRows:4,minRows:3},"max-length":200,"show-word-limit":""},null,8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),n("div",xe,[t(A,{class:"mr8",type:"primary",loading:_(k),onClick:L},{default:s(()=>[ke]),_:1},8,["loading"]),t(A,{onClick:U},{default:s(()=>[we]),_:1})])])}}});const Qe=j(Ne,[["__scopeId","data-v-1cb4ecb7"]]);export{Qe as default};
