import{_ as k}from"./index.928e1f3b.js";/* empty css              *//* empty css               */import{d as w,e as _,r as x,C as n,D as d,aI as l,aH as E,G as s,E as F,bh as B,aR as v,aL as g,bi as I,bj as C}from"./arco.b2fea22a.js";import{i as P}from"./file-handle.b0154fd5.js";const z={class:"uploader-container"},H={class:"arco-upload-list-item o"},S={key:0,class:"arco-upload-list-picture"},q=["src"],R={key:1,class:"arco-upload-picture-card"},$={class:"arco-upload-picture-card-text"},D={class:"arco-upload-tip"},L={class:"custom-arco-upload-icon"},j=w({__name:"index",emits:["updateImgUrl"],setup(A,{expose:f,emit:r}){const c=_(),a=_(),e=x({limit:1,size:200,action:"/",multiple:!1,draggable:!0,autoUpload:!1,imagePreview:!0,accept:"image/png, image/jpeg",type:"picture-card",proress:0}),h=o=>new Promise(t=>{o.size>e.size*1024?(v.error(`\u4E0A\u4F20\u7684\u6821\u5FBD\u6700\u5927${e.size}KB`),t(!1)):t(o)}),m=()=>new Promise(o=>{a.value=void 0,r("updateImgUrl",""),o(!0)}),U=o=>{a.value=o.fileItem;const t=c.value.$el,i=t.querySelector(".arco-upload-list-picture"),p=t.querySelector(".arco-upload-type-picture-card");return i.classList.add("arco-upload-hide"),p.classList.remove("arco-upload-hide"),P(a.value.file).then(u=>{e.proress=1,r("updateImgUrl",u),v.success("\u4E0A\u4F20\u6210\u529F\uFF01")}),{}},y=o=>{o.stopPropagation();const t=c.value;m(),t.abort(a.value),a.value=void 0,e.proress=0,r("updateImgUrl","")};return f({setBackImg:o=>{a.value={url:o,name:"",uid:Date.now().toString()}}}),(o,t)=>{const i=g("icon-close-circle-fill"),p=I,u=C,b=g("icon-camera");return n(),d("div",z,[l(u,{ref_key:"oUpload",ref:c,class:"refine-uploader","file-list":a.value?[a.value]:[],"show-file-list":!0,"list-type":e.type,accept:e.accept,draggable:e.draggable,"image-preview":e.imagePreview,"auto-upload":e.autoUpload,limit:e.limit,multiple:e.multiple,"custom-request":U,onBeforeUpload:h,onBeforeRemove:m},{"upload-button":E(()=>[s("div",H,[a.value&&a.value.url?(n(),d("div",S,[s("img",{src:a.value.url},null,8,q),s("div",{class:"arco-upload-list-picture-mask o",onClick:y},[l(i)]),l(p,{class:F(["custom-upload-progress",{"op-0 visi-hide":e.proress==1}]),type:"circle",percent:e.proress,"stroke-width":4,"track-color":"#5E94F6",color:"var(--color-bg-1)"},null,8,["class","percent"])])):(n(),d("div",R,[s("div",$,[s("div",D,[B(o.$slots,"uploader-tips",{},void 0,!0)])])]))])]),_:3},8,["file-list","list-type","accept","draggable","image-preview","auto-upload","limit","multiple"]),s("div",L,[l(b,{"stroke-width":4,style:{fontSize:"20px",color:"#417FF2"}})])])}}});const O=k(j,[["__scopeId","data-v-f1f844ce"]]);export{O as E};
