import{_ as pe}from"./index.928e1f3b.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               */import{d as _e,e as F,r as R,z as me,aL as I,bm as fe,C as g,D as V,aI as e,aH as t,aK as q,aJ as G,aE as y,aN as l,aO as D,u as c,bn as K,aR as f,aG as Ce,bx as Be,b2 as ge,br as xe,bw as Fe,b1 as De,bs as Ee,aW as ve,b6 as be,b8 as he,bv as ye,bt as Ae,bu as we}from"./arco.b2fea22a.js";import{u as Se}from"./loading.41f62eb6.js";import{f as Re}from"./vue.e5338f86.js";import{g as Ve}from"./classmgmt.1aeaeb2c.js";import{s as Ne,a as ke,b as Pe,c as ze}from"./scores.0a648409.js";import{T as A,a as b,E as M,b as Le}from"./enums.c11d9f01.js";import{c as Ue}from"./studentmgmt.217d652b.js";import{e as J}from"./tools.c661ac2d.js";import"./chart.2195b2ce.js";const He={class:"container"},Te=l(" \xA0\xA0 "),Ie=l("\u672A\u6D4B\u8BD5"),qe=l("\u90E8\u5206\u6D4B\u8BD5"),Ge=l("\u5DF2\u5B8C\u6210"),Ke=l("\u4F18\u79C0"),Me=l("\u826F\u597D"),Je=l("\u53CA\u683C"),Oe=l("\u4E0D\u53CA\u683C"),We=l("\u6709\u9644\u52A0\u5206"),$e=l("\u65E0\u9644\u52A0\u5206"),je=l(" \u67E5\u8BE2 "),Qe=l(" \u91CD\u7F6E "),Xe=l("\u5BFC\u51FA\u4E0A\u62A5\u6210\u7EE9"),Ye=l("\u5BFC\u51FA\u5E26\u8BC4\u5206\u6210\u7EE9"),Ze=l("\u5BFC\u51FA\u6D4B\u8BD5\u62A5\u544A"),et=l("\u5BFC\u5165\u89C6\u529B\u6570\u636E"),tt=l("\u5BFC\u51FA\u89C6\u529B\u6570\u636E"),at=l(" \u67E5\u770B\u8BE6\u60C5 "),ot=l(" \u4F53\u6D4B\u62A5\u544A "),ut=_e({__name:"index",setup(lt){const w=Re(),N=F(),E=F([]),k=F([]),P=F([]),z=F([]),h=F([]),{loading:L,setLoading:S}=Se(!0),O=R({type:"checkbox",onlyCurrent:!1,showCheckedAll:!0}),a=R({name:"",planCode:"",gradeCode:"",classesCode:"",userStudentNo:"",status:"",totalRate:"",extraPoint:""}),_=R({total:0,current:1,pageSize:10,showTotal:!0,showJumper:!0,showPageSize:!0}),W=(s,o)=>{w.push({name:"Scoredetail",query:{id:s,planCode:o}})},$=()=>{w.push({name:"Scorereport",query:{}})},v=async()=>{const{succ:s,msg:o,data:n}=await Ne({name:a.name,planCode:a.planCode,gradeCode:a.gradeCode,classesCode:a.classesCode,userStudentNo:a.userStudentNo,status:a.status,totalRate:a.totalRate,extraPoint:a.extraPoint,pageSize:_.pageSize,pageNum:_.current});s?(E.value=[],k.value=(n==null?void 0:n.list)||[],_.total=(n==null?void 0:n.total)||0):f.error(o),S(!1)},j=async()=>{const{succ:s,data:o,msg:n}=await Ve();s?(o.sort((i,r)=>Number(i.gradeCode)-Number(r.gradeCode)),z.value=[...o]):f.error(n)},Q=async s=>{const{succ:o,data:n,msg:i}=await Ue({gradeCode:s});o?h.value=n==null?void 0:n.map(r=>{const{id:p,classesCode:d,classesName:B}=r;return{id:p,classesCode:d,classesName:B}}):f.error(i)},X=async()=>{const{msg:s,data:o,succ:n}=await ke();n?(P.value=o||[],o!=null&&o.length&&(a.planCode=o[0].planCode)):f.error(s)},Y=s=>{h.value=[],a.classesCode="",s&&Q(s)},Z=s=>{_.current=s,E.value=[],v()},ee=s=>{_.pageSize=s,E.value=[],v()},te=()=>{S(!0),_.total=0,_.current=1,_.pageSize=10,setTimeout(()=>{v(),S(!1)},1200)},ae=()=>{_.total=0,_.current=1,_.pageSize=10,a.classesCode="",a.gradeCode="",h.value=[],N.value.resetFields(),v()},oe=async()=>{const s=await Pe({name:a.name,planCode:a.planCode,gradeCode:a.gradeCode,classesCode:a.classesCode,userStudentNo:a.userStudentNo,status:a.status,totalRate:a.totalRate,extraPoint:a.extraPoint});if(s){const{headers:o,data:n}=s,i=o["content-type"],r=o["content-disposition"],d=new RegExp("filename\\*=utf-8''([^;]+\\.[^\\.;]+);*").exec(r)||[],B=decodeURI(d[1]),x=new Blob([n],{type:i});J(x,B),f.success("\u5BFC\u51FA\u6210\u529F")}else f.error("\u5BFC\u51FA\u5931\u8D25")},ue=async()=>{const s=await ze({name:a.name,planCode:a.planCode,gradeCode:a.gradeCode,classesCode:a.classesCode,userStudentNo:a.userStudentNo,status:a.status,totalRate:a.totalRate,extraPoint:a.extraPoint});if(s){const{headers:o,data:n}=s,i=o["content-type"],r=o["content-disposition"],d=new RegExp("filename\\*=utf-8''([^;]+\\.[^\\.;]+);*").exec(r)||[],B=decodeURI(d[1]),x=new Blob([n],{type:i});J(x,B),f.success("\u5BFC\u51FA\u6210\u529F")}else f.error("\u5BFC\u51FA\u5931\u8D25")},le=()=>{f.warning("\u529F\u80FD\u6682\u672A\u5F00\u653E")},se=()=>{w.push({name:"Importeyesight"})},ne=()=>{f.warning("\u529F\u80FD\u6682\u672A\u5F00\u653E")};return me(()=>{v(),j(),X()}),(s,o)=>{const n=Ce,i=Be,r=ge,p=xe,d=Fe,B=De,x=Ee,de=I("icon-search"),C=ve,re=I("icon-refresh"),U=be,ie=he,H=ye,m=Ae,ce=we,T=fe("permission");return g(),V("div",He,[e(n,{items:["menu.tests"]},null,8,["items"]),e(H,{class:"general-card mb20",title:"\u4F53\u6D4B\u6210\u7EE9\u7BA1\u7406"},{default:t(()=>[e(ie,{ref_key:"formModelRef",ref:N,model:a,"label-align":"right","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:t(()=>[e(x,{gutter:16,wrap:!1},{default:t(()=>[e(p,{flex:"auto"},{default:t(()=>[e(x,{gutter:16,wrap:""},{default:t(()=>[e(p,{flex:"320px"},{default:t(()=>[e(r,{field:"planCode",label:"\u4F53\u6D4B\u8BA1\u5212"},{default:t(()=>[e(i,{modelValue:a.planCode,"onUpdate:modelValue":o[0]||(o[0]=u=>a.planCode=u),options:P.value,"field-names":{label:"planName",value:"planCode"},"allow-clear":"",placeholder:"\u8BF7\u9009\u62E9\u8BA1\u5212"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(p,{flex:"400px"},{default:t(()=>[e(r,{field:"name",label:"\u5E74\u7EA7/\u73ED\u7EA7"},{default:t(()=>[e(i,{modelValue:a.gradeCode,"onUpdate:modelValue":o[1]||(o[1]=u=>a.gradeCode=u),style:{width:"42%"},placeholder:"\u5E74\u7EA7","allow-clear":"",onChange:Y},{default:t(()=>[(g(!0),V(q,null,G(z.value,u=>(g(),y(d,{key:u.gradeCode,value:u.gradeCode},{default:t(()=>[l(D(u.gradeName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),Te,e(i,{modelValue:a.classesCode,"onUpdate:modelValue":o[2]||(o[2]=u=>a.classesCode=u),style:{width:"58%"},"allow-clear":"",placeholder:"\u73ED\u7EA7"},{default:t(()=>[(g(!0),V(q,null,G(h.value,u=>(g(),y(d,{key:u.id,value:u.classesCode},{default:t(()=>[l(D(u.classesName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{flex:"320px"},{default:t(()=>[e(r,{field:"name",label:"\u5B66\u751F\u59D3\u540D"},{default:t(()=>[e(B,{modelValue:a.name,"onUpdate:modelValue":o[3]||(o[3]=u=>a.name=u),placeholder:"\u8BF7\u8F93\u5165\u5B66\u751F\u59D3\u540D","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{flex:"320px"},{default:t(()=>[e(r,{field:"userStudentNo",label:"\u5B66\u7C4D\u53F7"},{default:t(()=>[e(B,{modelValue:a.userStudentNo,"onUpdate:modelValue":o[4]||(o[4]=u=>a.userStudentNo=u),placeholder:"\u8BF7\u8F93\u5165\u5B66\u7C4D\u53F7","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{flex:"320px"},{default:t(()=>[e(r,{field:"status",label:"\u6D4B\u8BD5\u8FDB\u5EA6"},{default:t(()=>[e(i,{modelValue:a.status,"onUpdate:modelValue":o[5]||(o[5]=u=>a.status=u),"allow-clear":"",placeholder:"\u8BF7\u9009\u62E9\u6D4B\u8BD5\u8FDB\u5EA6"},{default:t(()=>[e(d,{value:c(A).\u672A\u6D4B\u8BD5},{default:t(()=>[Ie]),_:1},8,["value"]),e(d,{value:c(A).\u90E8\u5206\u6D4B\u8BD5},{default:t(()=>[qe]),_:1},8,["value"]),e(d,{value:c(A).\u5DF2\u5B8C\u6210},{default:t(()=>[Ge]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{flex:"320px"},{default:t(()=>[e(r,{field:"totalRate",label:"\u6D4B\u8BD5\u8BC4\u4EF7"},{default:t(()=>[e(i,{modelValue:a.totalRate,"onUpdate:modelValue":o[6]||(o[6]=u=>a.totalRate=u),"allow-clear":"",placeholder:"\u8BF7\u9009\u62E9\u6D4B\u8BD5\u8BC4\u4EF7"},{default:t(()=>[e(d,{value:c(b).\u4F18\u79C0},{default:t(()=>[Ke]),_:1},8,["value"]),e(d,{value:c(b).\u826F\u597D},{default:t(()=>[Me]),_:1},8,["value"]),e(d,{value:c(b).\u53CA\u683C},{default:t(()=>[Je]),_:1},8,["value"]),e(d,{value:c(b).\u4E0D\u53CA\u683C},{default:t(()=>[Oe]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{flex:"320px"},{default:t(()=>[e(r,{field:"extraPoint",label:"\u9644\u52A0\u5206"},{default:t(()=>[e(i,{modelValue:a.extraPoint,"onUpdate:modelValue":o[7]||(o[7]=u=>a.extraPoint=u),"allow-clear":"",placeholder:"\u8BF7\u9009\u62E9\u9644\u52A0\u5206"},{default:t(()=>[e(d,{value:c(M).\u662F},{default:t(()=>[We]),_:1},8,["value"]),e(d,{value:c(M).\u5426},{default:t(()=>[$e]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(p,{flex:"130px",class:"o-border-left"},{default:t(()=>[e(U,{fill:"",wrap:"",align:"end",size:20,direction:"vertical"},{default:t(()=>[e(C,{loading:c(L),type:"primary",class:"mb16",onClick:te},{icon:t(()=>[e(de)]),default:t(()=>[je]),_:1},8,["loading"]),e(C,{onClick:ae},{icon:t(()=>[e(re)]),default:t(()=>[Qe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,{class:"general-card"},{default:t(()=>[e(U,{class:"mb16 mt16"},{default:t(()=>[e(C,{type:"primary",onClick:oe},{default:t(()=>[Xe]),_:1}),e(C,{type:"primary",onClick:ue},{default:t(()=>[Ye]),_:1}),e(C,{type:"primary",onClick:le},{default:t(()=>[Ze]),_:1}),e(C,{type:"primary",onClick:se},{default:t(()=>[et]),_:1}),e(C,{type:"primary",onClick:ne},{default:t(()=>[tt]),_:1})]),_:1}),e(ce,{selectedKeys:E.value,"onUpdate:selectedKeys":o[8]||(o[8]=u=>E.value=u),"row-key":"id",loading:c(L),data:k.value,bordered:!1,scroll:{x:200},pagination:_,"row-selection":O,onPageChange:Z,onPageSizeChange:ee},{columns:t(()=>[e(m,{title:"\u5E8F\u53F7",width:60},{cell:t(({rowIndex:u})=>[l(D(u+1),1)]),_:1}),e(m,{title:"\u5B66\u751F\u59D3\u540D","data-index":"name",width:180}),e(m,{title:"\u6027\u522B",width:80},{cell:t(({record:u})=>[l(D(c(Le)[u.sex]),1)]),_:1}),e(m,{title:"\u5E74\u7EA7","data-index":"grandName"}),e(m,{title:"\u73ED\u7EA7","data-index":"simpleName"}),e(m,{title:"\u5B66\u7C4D\u53F7","data-index":"userStudentNo"}),e(m,{title:"\u6807\u51C6\u5206","data-index":"standardScore"}),e(m,{title:"\u9644\u52A0\u5206","data-index":"totalExtraPoint"}),e(m,{title:"\u4F53\u6D4B\u603B\u5206","data-index":"totalWeightScore"}),e(m,{title:"\u603B\u5206\u7B49\u7EA7","data-index":"totalRate"},{cell:t(({record:u})=>[l(D(c(b)[u.totalRate]),1)]),_:1}),e(m,{title:"\u6D4B\u8BD5\u8FDB\u5EA6","data-index":"status"},{cell:t(({record:u})=>[l(D(c(A)[u.status]),1)]),_:1}),e(m,{title:"\u64CD\u4F5C",align:"center",width:220,fixed:"right"},{cell:t(({record:u})=>[K((g(),y(C,{type:"text",size:"small",onClick:st=>W(u.id,u.planCode)},{default:t(()=>[at]),_:2},1032,["onClick"])),[[T,["admin"]]]),K((g(),y(C,{type:"text",size:"small",onClick:$},{default:t(()=>[ot]),_:1})),[[T,["admin"]]])]),_:1})]),_:1},8,["selectedKeys","loading","data","pagination","row-selection"])]),_:1})])}}});const wt=pe(ut,[["__scopeId","data-v-ebd6c888"]]);export{wt as default};
