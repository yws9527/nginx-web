import{u as N,_ as I,b as T,d as te,e as oe,f as Y,g as ne,l as G,h as O,D as ae}from"./index.500a2a7a.js";import{_ as se,F as ue}from"./index.f00c939b.js";import{aR as re,d as M,c as y,r as ce,C as w,D as A,aI as s,aH as f,u as _,k as le,aN as Q,b3 as ie,b2 as de,b8 as pe,by as _e,e as S,i as fe,aL as F,G as B,aE as k,aF as $,F as z,bd as me,b6 as he,aW as ve,bT as ge,bg as be,b9 as K,ba as j,bY as ye,bZ as we,h as q,b_ as H,b$ as Be,c0 as xe,aO as Ce,c1 as De,E as X,c2 as ke,c3 as Ee,w as ee,aK as Fe,aJ as Se,c4 as Me,o as Le,z as $e,c5 as Ae,br as Z,c6 as Ie,c7 as Te,p as Pe,bx as Re,c8 as Ve,c9 as Ue,aY as ze,ca as Ne,cb as Oe}from"./arco.f893a4fd.js";import{f as V,h as Ke,i as je,j as We,k as W,l as qe}from"./vue.de90413b.js";/* empty css              *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css              *//* empty css               */import{r as He,o as Ze}from"./index.ec9a9efd.js";import{i as E}from"./enums.4b6db02f.js";import"./chart.3eba121e.js";function Je(){const o=V(),t=N();return{logout:async l=>{await t.logout(),re.success("\u767B\u51FA\u6210\u529F"),o.push({name:l&&typeof l=="string"?l:"login"})}}}const Ye={class:"container"},Ge=Q("\u4FEE\u6539\u5BC6\u7801"),Qe=M({__name:"index",props:{showModel:{type:Boolean,default:!0}},emits:["updatemodel"],setup(o,{emit:t}){const u=o,l=y(()=>u.showModel),c=ce({originPwd:"",newPwd:"",confirmPwd:""}),v=()=>{t("updatemodel")},d=()=>{t("updatemodel")};return(m,g)=>{const i=ie,x=de,C=pe,a=_e;return w(),A("div",Ye,[s(a,{visible:_(l),"onUpdate:visible":g[3]||(g[3]=n=>le(l)?l.value=n:null),"title-align":"start","unmount-on-close":"","ok-text":"\u786E\u5B9A\u4FEE\u6539","on-before-open":v,onCancel:d},{title:f(()=>[Ge]),default:f(()=>[s(C,{model:c},{default:f(()=>[s(x,{field:"originPwd",label:"\u539F\u59CB\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{match:/[a-zA-Z0-9]{6,8}/,message:"\u5BC6\u7801\u957F\u5EA66-8\u4F4D\u6570\u5B57\u6216\u5B57\u6BCD"}],"validate-trigger":["change","input"]},{default:f(()=>[s(i,{modelValue:c.originPwd,"onUpdate:modelValue":g[0]||(g[0]=n=>c.originPwd=n),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u7CFB\u7EDF\u521D\u59CB\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),s(x,{field:"newPwd",label:"\u65B0\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{match:/[a-zA-Z0-9]{6,8}/,message:"\u5BC6\u7801\u957F\u5EA66-8\u4F4D\u6570\u5B57\u6216\u5B57\u6BCD"}],"validate-trigger":["change","input"]},{default:f(()=>[s(i,{modelValue:c.newPwd,"onUpdate:modelValue":g[1]||(g[1]=n=>c.newPwd=n),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),s(x,{field:"confirmPwd",label:"\u786E\u8BA4\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{match:/[a-zA-Z0-9]{6,8}/,message:"\u5BC6\u7801\u957F\u5EA66-8\u4F4D\u6570\u5B57\u6216\u5B57\u6BCD"}],"validate-trigger":["change","input"]},{default:f(()=>[s(i,{modelValue:c.confirmPwd,"onUpdate:modelValue":g[2]||(g[2]=n=>c.confirmPwd=n),"allow-clear":"",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}});const Xe=I(Qe,[["__scopeId","data-v-f6f112ac"]]),et=o=>(K("data-v-e7c8f103"),o=o(),j(),o),tt={class:"navbar"},ot={class:"left-side"},nt=et(()=>B("img",{class:"logo",alt:"logo",src:se},null,-1)),at=Q(" \u4F53\u6D4B\u7BA1\u7406\u4E91\u5E73\u53F0 "),st={class:"right-side"},ut={class:"message-box-trigger"},rt=["src"],ct=M({__name:"index",setup(o){const t=S(!1),u=T(),l=N(),{logout:c}=Je();te(),Ke();const v=y(()=>l.avatar);y(()=>u.theme);const d=je({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(x){u.toggleTheme(!1)}});We(d),S(),S();const m=()=>{t.value=!1},g=()=>{c()},i=fe("toggleDrawerMenu");return(x,C)=>{const a=me,n=F("icon-menu-fold"),r=he,e=F("icon-export"),p=ve,h=ge,D=F("IconUser"),b=be;return w(),A("div",tt,[B("div",ot,[s(r,null,{default:f(()=>[nt,s(a,{style:{margin:0,fontSize:"18px"},heading:5},{default:f(()=>[at]),_:1}),_(u).device==="mobile"?(w(),k(n,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:_(i)},null,8,["onClick"])):$("",!0)]),_:1})]),B("ul",st,[B("li",null,[s(h,{content:"\u9000\u51FA\u767B\u5F55"},{default:f(()=>[B("div",ut,[s(p,{class:"nav-btn",type:"outline",shape:"circle",onClick:g},{default:f(()=>[s(e)]),_:1})])]),_:1})]),B("li",null,[s(b,{size:32,style:z({marginRight:"8px",cursor:"pointer",background:_(v)?"":"rgb(var(--arcoblue-6))"})},{default:f(()=>[_(v)?(w(),A("img",{key:0,alt:"avatar",src:_(v)},null,8,rt)):(w(),k(D,{key:1}))]),_:1},8,["style"])])]),s(Xe,{"show-model":t.value,onUpdatemodel:m},null,8,["show-model"])])}}});const lt=I(ct,[["__scopeId","data-v-e7c8f103"]]);const it=[...oe],dt=it.map(o=>{const{name:t,path:u,meta:l,redirect:c,children:v}=o;return{name:t,path:u,meta:l,redirect:c,children:v}}),pt=dt;function _t(){const o=Y(),t=T(),u=y(()=>t.menuFromServer?t.appAsyncMenus:pt);return{menuTree:y(()=>{const c=JSON.parse(JSON.stringify(u.value));c.sort((d,m)=>(d.meta.order||0)-(m.meta.order||0));function v(d,m){return d?d.map(i=>{var C,a;if(!o.accessRouter(i))return null;if(((C=i.meta)==null?void 0:C.hideChildrenInMenu)||!i.children)return i.children=[],i;i.children=i.children.filter(n=>{var r;return((r=n.meta)==null?void 0:r.hideInMenu)!==!0});const x=v(i.children,m+1);return x.length||m>1?(i.children=x,i):((a=i.meta)==null?void 0:a.hideInMenu)===!1?i:null}).filter(Boolean):null}return v(c,0)})}}function ft(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!we(o)}const mt=M({emit:["collapse"],setup(){const{t:o}=ne(),t=T(),u=V(),l=W(),{menuTree:c}=_t(),v=y({get(){return t.device==="desktop"?t.menuCollapse:!1},set(a){t.updateSettings({menuCollapse:a})}}),d=S([]),m=S([]),g=a=>{if(He.test(a.path)){Ze(a.path),m.value=[a.name];return}console.log(a);const{hideInMenu:n,activeMenu:r,hideChildrenInMenu:e}=a.meta;if(a.path==="/dashboard"&&e&&r==="dashboard"){u.push({name:"Workplace"});return}if(a.path==="/schools"&&e&&r==="Schools"){u.push({name:"Schoolmgmt"});return}if(a.path==="/templates"&&e&&r==="Templates"){u.push({name:"Templatemgmt"});return}if(a.path==="/tests"&&e&&r==="Tests"){u.push({name:"Testmgmt"});return}if(l.name===a.name&&!n&&!r){m.value=[a.name];return}u.push({name:a.name})},i=a=>{const n=[];let r=!1;const e=(p,h,D)=>{var b;if(p.name===D){r=!0,n.push(...h,p.name);return}(b=p.children)!=null&&b.length&&p.children.forEach(P=>{e(P,[...h],D)})};return c.value.forEach(p=>{r||e(p,[p.name],a)}),n};G(a=>{const{requiresAuth:n,activeMenu:r,hideInMenu:e}=a.meta;if(n&&(!e||r)){const p=i(r||a.name),h=new Set([...p,...d.value]);d.value=[...h],m.value=[r||p[p.length-1]]}},!0);const x=a=>{t.device==="desktop"&&t.updateSettings({menuCollapse:a})},C=()=>{function a(n,r=[]){return n&&n.forEach(e=>{var D;const p=(D=e==null?void 0:e.meta)!=null&&D.icon?()=>{var b;return q(H(`<${(b=e==null?void 0:e.meta)==null?void 0:b.icon}/>`))}:null,h=(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)!==0?s(Be,{key:e==null?void 0:e.name},{default:()=>[a(e==null?void 0:e.children)],icon:p,title:()=>{var b;return q(H(o(((b=e==null?void 0:e.meta)==null?void 0:b.locale)||"")))}}):s(xe,{key:e==null?void 0:e.name,onClick:()=>g(e)},{default:()=>{var b;return[o(((b=e==null?void 0:e.meta)==null?void 0:b.locale)||"")]},icon:p});r.push(h)}),r}return a(c.value)};return()=>{let a;return s(ye,{collapsed:v.value,"onUpdate:collapsed":n=>v.value=n,"open-keys":d.value,"onUpdate:open-keys":n=>d.value=n,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":m.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:x},ft(a=C())?a:{default:()=>[a]})}}});const J=I(mt,[["__scopeId","data-v-91bbe3ae"]]);const R=o=>(K("data-v-8d6120cb"),o=o(),j(),o),ht={class:"tag-link"},vt=R(()=>B("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),gt=R(()=>B("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),bt=R(()=>B("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),yt=R(()=>B("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),wt=R(()=>B("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),Bt=M({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(o){const t=o,u=V(),l=W(),c=O(),v=n=>{u.push({...n})},d=y(()=>c.getTabList),m=y(()=>t.index===0),g=y(()=>[0,1].includes(t.index)),i=y(()=>t.index===d.value.length-1),x=(n,r)=>{if(c.deleteTag(r,n),t.itemData.fullPath===l.fullPath){const e=d.value[r-1];u.push({name:e.name})}},C=()=>d.value.findIndex(n=>n.fullPath===l.fullPath),a=n=>{const{itemData:r,index:e}=t,p=[...d.value];if(n===E.current)x(r,e);else if(n===E.left){const h=C();p.splice(1,t.index-1),c.freshTabList(p),h<e&&u.push({name:r.name})}else if(n===E.right){const h=C();p.splice(t.index+1),c.freshTabList(p),h>e&&u.push({name:r.name})}else if(n===E.others){const h=d.value.filter((D,b)=>b===0||b===t.index);c.freshTabList(h),u.push({name:r.name})}else c.resetTabList(),u.push({name:ae})};return(n,r)=>{const e=F("icon-close"),p=ke,h=F("icon-to-left"),D=F("icon-to-right"),b=F("icon-swap"),P=F("icon-folder-delete"),U=Ee;return w(),k(U,{trigger:"contextMenu",onSelect:a},{content:f(()=>[s(p,{disabled:_(m),value:_(E).current},{default:f(()=>[s(e),vt]),_:1},8,["disabled","value"]),s(p,{disabled:_(g),value:_(E).left},{default:f(()=>[s(h),gt]),_:1},8,["disabled","value"]),s(p,{disabled:_(i),value:_(E).right},{default:f(()=>[s(D),bt]),_:1},8,["disabled","value"]),s(p,{value:_(E).others},{default:f(()=>[s(b),yt]),_:1},8,["value"]),s(p,{value:_(E).all},{default:f(()=>[s(P),wt]),_:1},8,["value"])]),default:f(()=>[B("span",{class:X(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":o.itemData.fullPath===n.$route.fullPath}]),onClick:r[1]||(r[1]=L=>v(o.itemData))},[B("span",ht,Ce(n.$t(o.itemData.title)),1),B("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:r[0]||(r[0]=De(L=>x(o.itemData,o.index),["stop"]))},[s(e)])],2)]),_:1})}}});const xt=I(Bt,[["__scopeId","data-v-8d6120cb"]]),Ct=o=>(K("data-v-7fe76b83"),o=o(),j(),o),Dt={class:"tab-bar-container"},kt={class:"tab-bar-box"},Et={class:"tab-bar-scroll"},Ft={class:"tags-wrap"},St=Ct(()=>B("div",{class:"tag-bar-operation"},null,-1)),Mt=M({__name:"index",setup(o){const t=T(),u=O(),l=S(),c=y(()=>u.getTabList),v=y(()=>t.navbar?60:0);return ee(()=>t.navbar,()=>{l.value.updatePosition()}),G(d=>{!d.meta.noAffix&&!c.value.some(m=>m.fullPath===d.fullPath)&&u.updateTabList(d)},!0),(d,m)=>{const g=Me;return w(),A("div",Dt,[s(g,{ref_key:"affixRef",ref:l,"offset-top":_(v)},{default:f(()=>[B("div",kt,[B("div",Et,[B("div",Ft,[(w(!0),A(Fe,null,Se(_(c),(i,x)=>(w(),k(xt,{key:i.fullPath,index:x,"item-data":i},null,8,["index","item-data"]))),128))])]),St])]),_:1},8,["offset-top"])])}}});const Lt=I(Mt,[["__scopeId","data-v-7fe76b83"]]);function $t(o,t,u,l=!1){o.addEventListener&&typeof o.addEventListener=="function"&&o.addEventListener(t,u,l)}function At(o,t,u,l=!1){o.removeEventListener&&typeof o.removeEventListener=="function"&&o.removeEventListener(t,u,l)}const It=992;function Tt(){return document.body.getBoundingClientRect().width-1<It}function Pt(o){const t=T();function u(){if(!document.hidden){const c=Tt();t.toggleDevice(c?"mobile":"desktop"),t.toggleMenu(c)}}const l=qe(u,100);Le(()=>{o&&l()}),$e(()=>{$t(window,"resize",l)}),Ae(()=>{At(window,"resize",l)})}const Rt=M({__name:"page-layout",setup(o){const t=O(),u=y(()=>t.getCacheList);return(l,c)=>{const v=F("router-view");return w(),k(v,null,{default:f(({Component:d,route:m})=>[s(Te,{name:"fade",mode:"out-in",appear:""},{default:f(()=>[m.meta.ignoreCache?(w(),k(Z(d),{key:m.fullPath})):(w(),k(Ie,{key:1,include:_(u)},[(w(),k(Z(d),{key:m.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),Vt={key:0,class:"layout-navbar"},Ut={class:"menu-wrapper"},zt=M({__name:"default-layout",setup(o){const t=T(),u=N(),l=V(),c=W(),v=Y();Pt(!0);const d="60px",m=y(()=>t.navbar),g=y(()=>t.menu),i=y(()=>t.hideMenu),x=y(()=>t.footer),C=y(()=>t.menuCollapse?48:t.menuWidth),a=y(()=>t.menuCollapse),n=y(()=>{const h=g.value&&!i.value?{paddingLeft:`${C.value}px`}:{},D=m.value?{paddingTop:d}:{};return{...h,...D}}),r=h=>{t.updateSettings({menuCollapse:h})};ee(()=>u.role,h=>{h&&!v.accessRouter(c)&&l.push({name:"notFound"})});const e=S(!1),p=()=>{e.value=!1};return Pe("toggleDrawerMenu",()=>{e.value=!e.value}),(h,D)=>{const b=Ue,P=ze,U=Ne,L=Oe;return w(),k(L,{class:X(["layout",{mobile:_(t).hideMenu}])},{default:f(()=>[_(m)?(w(),A("div",Vt,[s(lt)])):$("",!0),s(L,null,{default:f(()=>[s(L,null,{default:f(()=>[_(g)?Re((w(),k(b,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:_(a),collapsible:!0,width:_(C),style:z({paddingTop:_(m)?"60px":""}),"hide-trigger":!0,onCollapse:r},{default:f(()=>[B("div",Ut,[s(J)])]),_:1},8,["collapsed","width","style"])),[[Ve,!_(i)]]):$("",!0),_(i)?(w(),k(P,{key:1,visible:e.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:p},{default:f(()=>[s(J)]),_:1},8,["visible"])):$("",!0),s(L,{class:"layout-content",style:z(_(n))},{default:f(()=>[_(t).tabBar?(w(),k(Lt,{key:0})):$("",!0),s(U,null,{default:f(()=>[s(Rt)]),_:1}),_(x)?(w(),k(ue,{key:1})):$("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const to=I(zt,[["__scopeId","data-v-23d225d8"]]);export{to as default};
