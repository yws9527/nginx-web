import{_ as ue}from"./index.500a2a7a.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import{d as le,e as L,r as g,c as ne,o as se,aL as b,bw as ie,C as E,D as ce,aI as e,aH as t,u as c,aN as n,aO as h,G as de,E as re,bx as T,aE as U,aR as x,by as pe,aG as _e,b1 as me,b2 as fe,be as Ce,bz as he,bA as ye,bs as Be,aW as ve,b6 as xe,b8 as Fe,bk as De,bo as ge,bq as be}from"./arco.f893a4fd.js";import{u as Ee}from"./loading.c2b41a1f.js";import{S as v,D as w,a as V}from"./enums.4b6db02f.js";import{s as we,a as Ve,b as Ae}from"./citys.7406df18.js";/* empty css                */import{f as Se}from"./vue.de90413b.js";import"./chart.3eba121e.js";const ke={class:"container"},ze=n("\u662F"),Ne=n("\u4E0D\u662F"),Re=n("\u5C0F\u5B66"),He=n("\u521D\u4E2D"),Le=n("\u9AD8\u4E2D"),Te=n("\u5927\u5B66"),Ue=n("\u6B63\u5E38"),Me=n("\u7981\u7528"),qe=n(" \xA0\xA0 "),Ie=n(" \xA0\xA0 "),Oe=n(" \u67E5\u8BE2 "),Pe=n(" \u91CD\u7F6E "),$e=n(" \u65B0\u589E\u5B66\u6821 "),Ge=n("\u6279\u91CF\u5BFC\u5165"),je=n(" \u7F16\u8F91 "),Je=n(" \u5220\u9664 "),We=le({__name:"index",setup(Ke){const A=L(),S=L(),k=Se(),{loading:M,setLoading:F}=Ee(!0),_=g({provinceData:[],cityData:[],areaData:[]}),i=g({total:0,current:1,pageSize:10,showTotal:!0,showJumper:!0,showPageSize:!0}),u=g({name:"",cityCode:"",areaCode:"",provinceCode:"",type:"",status:"",ascriptionCity:""}),q=ne(()=>o=>{var l;if(o!=null&&o.type){let s="";return((l=o==null?void 0:o.type)==null?void 0:l.split("")).forEach(r=>{s+=v[r]}),s}return"--"}),y=async()=>{const{succ:o,msg:l,data:s}=await we({name:u.name,type:u.type,status:u.status,pageNum:i.current,pageSize:i.pageSize,cityCode:u.cityCode,areaCode:u.areaCode,provinceCode:u.provinceCode,ascriptionCity:u.ascriptionCity});o?(S.value=(s==null?void 0:s.list)||[],i.total=(s==null?void 0:s.total)||0):x.error(l),F(!1)},I=async(o,l)=>{const{succ:s,msg:d}=await Ae({schoolId:o});s?(x.success("\u5220\u9664\u6210\u529F"),l(!0),i.current=1,i.pageSize=10,y()):(l(!1),x.error(d))},D=async(o,l)=>{const{succ:s,data:d}=await Ve({code:l,type:o});s&&(d==null||d.forEach(r=>{Object.entries(r).forEach(m=>{const[p,C]=m;r.label=C,r.value=p})}),o==="province"&&(_.provinceData=d),o==="city"&&(_.cityData=d),o==="area"&&(_.areaData=d))},O=(o,l)=>{pe.info({width:375,title:"\u4FE1\u606F\u63D0\u793A",titleAlign:"start",hideCancel:!1,modalClass:"custom-del-model",content:`\u8BF7\u786E\u8BA4\u662F\u5426\u5220\u9664\u201C${l}\u201D`,cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A\u5220\u9664",onBeforeCancel(){return!0},onBeforeOk(s){I(o,s)}})},P=o=>{k.push({name:"Addschool",query:{schoolId:o}})},$=()=>{k.push({name:"Addschool"})},G=()=>{x.warning("\u529F\u80FD\u6682\u672A\u5F00\u653E")},j=o=>{u.cityCode="",u.areaCode="",o?(u.provinceCode=o,D("city",o)):(_.cityData=[],_.areaData=[])},J=o=>{u.areaCode="",o?(u.cityCode=o,D("area",o)):_.areaData=[]},W=o=>{i.current=o,y()},K=o=>{i.pageSize=o,i.current=1,y()},Q=()=>{F(!0),i.total=0,i.current=1,i.pageSize=10,setTimeout(()=>{y(),F(!1)},1200)},X=()=>{i.total=0,i.current=1,i.pageSize=10,A.value.resetFields(),u.provinceCode="",u.cityCode="",u.areaCode="",y()};return se(()=>{y(),D("province")}),(o,l)=>{const s=_e,d=me,r=fe,m=Ce,p=he,C=ye,z=Be,Y=b("icon-search"),B=ve,Z=b("icon-refresh"),N=xe,ee=Fe,R=De,te=b("icon-plus"),f=ge,ae=be,H=ie("permission");return E(),ce("div",ke,[e(s,{items:["menu.schools"]},null,8,["items"]),e(R,{class:"general-card mb20",title:"\u5B66\u6821\u7BA1\u7406"},{default:t(()=>[e(ee,{ref_key:"formModelRef",ref:A,"label-align":"right",model:u,"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:t(()=>[e(z,{gutter:16,wrap:!1},{default:t(()=>[e(m,{flex:"auto"},{default:t(()=>[e(z,{gutter:16,wrap:""},{default:t(()=>[e(m,{flex:"360px"},{default:t(()=>[e(r,{field:"name",label:"\u5B66\u6821\u540D\u79F0"},{default:t(()=>[e(d,{modelValue:u.name,"onUpdate:modelValue":l[0]||(l[0]=a=>u.name=a),placeholder:"\u8BF7\u8F93\u5165\u5B66\u6821\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{flex:"360px"},{default:t(()=>[e(r,{field:"ascriptionCity",label:"\u5E02\u76F4\u5C5E\u5B66\u6821"},{default:t(()=>[e(C,{modelValue:u.ascriptionCity,"onUpdate:modelValue":l[1]||(l[1]=a=>u.ascriptionCity=a),placeholder:"\u8BF7\u9009\u62E9","allow-clear":""},{default:t(()=>[e(p,{value:c(w).\u662F},{default:t(()=>[ze]),_:1},8,["value"]),e(p,{value:c(w).\u4E0D\u662F},{default:t(()=>[Ne]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{flex:"360px"},{default:t(()=>[e(r,{field:"type",label:"\u5B66\u6821\u7C7B\u578B"},{default:t(()=>[e(C,{modelValue:u.type,"onUpdate:modelValue":l[2]||(l[2]=a=>u.type=a),"allow-clear":"",placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[e(p,{value:c(v).\u5C0F\u5B66},{default:t(()=>[Re]),_:1},8,["value"]),e(p,{value:c(v).\u521D\u4E2D},{default:t(()=>[He]),_:1},8,["value"]),e(p,{value:c(v).\u9AD8\u4E2D},{default:t(()=>[Le]),_:1},8,["value"]),e(p,{value:c(v).\u5927\u5B66},{default:t(()=>[Te]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{flex:"360px"},{default:t(()=>[e(r,{field:"status",label:"\u5B66\u6821\u72B6\u6001"},{default:t(()=>[e(C,{modelValue:u.status,"onUpdate:modelValue":l[3]||(l[3]=a=>u.status=a),"allow-clear":"",placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[e(p,{value:c(V).\u6B63\u5E38},{default:t(()=>[Ue]),_:1},8,["value"]),e(p,{value:c(V).\u7981\u7528},{default:t(()=>[Me]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{flex:"580px"},{default:t(()=>[e(r,{field:"name",label:"\u6240\u5C5E\u5730\u57DF","label-col-style":{flex:"0 0 86px"}},{default:t(()=>[e(C,{modelValue:u.provinceCode,"onUpdate:modelValue":l[4]||(l[4]=a=>u.provinceCode=a),"allow-clear":"",options:_.provinceData,placeholder:"\u8BF7\u9009\u62E9\u7701",onChange:j},null,8,["modelValue","options"]),qe,e(C,{modelValue:u.cityCode,"onUpdate:modelValue":l[5]||(l[5]=a=>u.cityCode=a),"allow-clear":"",options:_.cityData,placeholder:"\u8BF7\u9009\u62E9\u5E02",onChange:J},null,8,["modelValue","options"]),Ie,e(C,{modelValue:u.areaCode,"onUpdate:modelValue":l[6]||(l[6]=a=>u.areaCode=a),options:_.areaData,placeholder:"\u8BF7\u9009\u62E9\u53BF/\u533A","allow-clear":""},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{flex:"124px",class:"o-border-left"},{default:t(()=>[e(N,{class:"pt10",fill:"",wrap:"",size:10,align:"end",direction:"vertical"},{default:t(()=>[e(B,{type:"primary",class:"mb16",onClick:Q},{icon:t(()=>[e(Y)]),default:t(()=>[Oe]),_:1}),e(B,{onClick:X},{icon:t(()=>[e(Z)]),default:t(()=>[Pe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(R,{class:"general-card"},{default:t(()=>[e(N,{class:"mb16 mt16"},{default:t(()=>[e(B,{type:"primary",onClick:$},{icon:t(()=>[e(te)]),default:t(()=>[$e]),_:1}),e(B,{type:"primary",onClick:G},{default:t(()=>[Ge]),_:1})]),_:1}),e(ae,{scroll:{x:2e3},"row-key":"id",bordered:!1,loading:c(M),data:S.value,pagination:i,onPageChange:W,onPageSizeChange:K},{columns:t(()=>[e(f,{title:"\u5E8F\u53F7","data-index":"number",width:80},{cell:t(({rowIndex:a})=>[n(h(a+1),1)]),_:1}),e(f,{title:"\u5B66\u6821\u540D\u79F0","data-index":"name"}),e(f,{title:"\u6240\u5C5E\u5730\u57DF","data-index":"provinceName"},{cell:t(({record:a})=>[n(h(a.provinceName||"null")+"- "+h(a.cityName||"null")+"- "+h(a.areaName||"null"),1)]),_:1}),e(f,{title:"\u5B66\u6821\u7C7B\u578B","data-index":"type",width:150},{cell:t(({record:a})=>[n(h(c(q)(a)),1)]),_:1}),e(f,{title:"\u5E02\u76F4\u5C5E\u5B66\u6821","data-index":"ascriptionCity",width:150},{cell:t(({record:a})=>[n(h(c(w)[a==null?void 0:a.ascriptionCity]||"--"),1)]),_:1}),e(f,{title:"\u73ED\u7EA7\u6570\u91CF","data-index":"classesCount",width:150}),e(f,{title:"\u5B66\u751F\u6570\u91CF","data-index":"studentCount",width:150}),e(f,{title:"\u5B66\u6821\u72B6\u6001","data-index":"status",width:150},{cell:t(({record:a})=>[de("i",{class:re(["dot",{active:a==null?void 0:a.status}])},null,2),n(" "+h(c(V)[a==null?void 0:a.status]||"--"),1)]),_:1}),e(f,{title:"\u64CD\u4F5C",width:180,align:"center","data-index":"operations",fixed:"right"},{cell:t(({record:a})=>[T((E(),U(B,{type:"text",size:"small",onClick:oe=>P(a.id)},{default:t(()=>[je]),_:2},1032,["onClick"])),[[H,["admin"]]]),T((E(),U(B,{type:"text",size:"small",onClick:oe=>O(a.id,a.name)},{default:t(()=>[Je]),_:2},1032,["onClick"])),[[H,["admin"]]])]),_:1})]),_:1},8,["loading","data","pagination"])]),_:1})])}}});const Ct=ue(We,[["__scopeId","data-v-7dc50830"]]);export{Ct as default};
